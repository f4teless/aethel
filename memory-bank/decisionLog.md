# Decision Log - Current Architecture

| Date | Decision | Rationale |
|------|----------|-----------|
| 2025-07-14 | Use Next.js for frontend framework | Next.js provides better React ecosystem support, extensive community resources, and better integration with educational platform requirements. App Router and React Server Components offer performance benefits for complex gaming interfaces. |
| 2025-07-14 | Deploy frontend on Vercel | Vercel is optimized specifically for Next.js applications with Edge Runtime, automatic performance optimizations, and seamless Next.js integration for better performance and developer experience. |
| 2025-07-14 | Use Cloudflare Workers for backend API | Cloudflare's edge network provides global low-latency access critical for gaming applications. Workers offer excellent cold start performance, automatic scaling, built-in DDoS protection and CDN capabilities. |
| 2025-07-14 | Adopt oRPC for API communication | oRPC provides end-to-end type safety, automatic API documentation, and better developer experience. Reduces runtime errors and improves development velocity for complex gaming platform with multiple API endpoints. |
| 2025-07-14 | Use PostgreSQL with Drizzle ORM | PostgreSQL provides robust relational data management for complex gaming relationships (users, classes, leaderboards). Drizzle ORM offers type-safe database operations while maintaining performance for both simple and complex queries. |
| 2025-07-14 | Add Google + GitHub authentication | Google authentication increases user accessibility and conversion rates. Multiple authentication options reduce friction in onboarding process for educational platforms and accommodate diverse user preferences. |
| 2025-07-15 | Create unique RPG-style floating orb navigation | Differentiate from traditional coding platforms like LeetCode. Floating orb expands into radial portal menu with mystical theme, player status bar, XP progression, and ambient effects for immersive gaming experience. |
| 2025-07-15 | Implement comprehensive performance optimization | Code splitting with lazy loading, service worker caching, image optimization, performance monitoring, and error boundaries while preserving RPG-themed styling for improved performance and user experience. |
| 2025-07-16 | Adopt dark fantasy story framework inspired by Shadow Slave/LOTM | Dark fantasy atmosphere with mathematical corruption themes creates emotional stakes and memorable context for algorithmic learning. Pattern-sight abilities come with isolation and supernatural consequences. |
| 2025-07-16 | Replace MCQs with LeetCode-style DSA problems | Real Python coding challenges provide actual practice while maintaining story immersion. Progressive difficulty: Easy (Two Sum) â†’ Medium simplified (Sudoku 4x4, Course Schedule) for appropriate prologue learning curve. |
| 2025-07-16 | Consolidate all story content under /chapters/ directory | Cleaner organization with single source of truth for all story content. Structure: chapters/prologue/, chapters/chapter-1/, chapters/chapter-2/ plus supporting files for easier maintenance and development. |
| 2025-07-16 | Expand from 220 chapters to 420 chapters with balanced topic distribution across all arcs | 420 chapters allows comprehensive coverage of 1,260+ problems from Striver's DSA sheet (450), NeetCode (250), LeetCode 150, and LeetCode 75, while maintaining mobile-optimized chapter lengths of 800-1000 words. Balanced distribution prevents topic clustering fatigue and better prepares learners for mixed-topic coding interviews. |
| 2025-07-16 | Implement balanced topic distribution instead of difficulty-clustered arcs | Educational research shows that mixing topic types prevents learner fatigue and improves retention. Rather than dedicating entire arcs to specific topics (all arrays, then all trees), each arc contains proportional representation of all 8 core categories with gradually increasing difficulty. This mirrors real coding interview conditions and maintains engagement through variety. |
| 2025-07-16 | Implement nested reality layers with multiple storylines integrated through revelation system | Rather than separate campaigns, multiple storylines (Code Corruption, Memory Architect, Pattern Wars, Logic Plague, etc.) exist as layered revelations within the same narrative. As the Architect's Pattern-Sight deepens, they discover that apparent "corruption" from one perspective might be something else entirely from another reality layer. This allows platform expansion without narrative fragmentation. |
| 2025-07-16 | Implement strict chapter-based revelation timing for 5-layer reality structure | Each reality layer must have sufficient time to be established as truth before being recontextualized by deeper revelations. 84 chapters per layer ensures proper pacing: establishment phase, development phase, questioning phase, revelation phase. This prevents narrative whiplash and allows proper educational progression aligned with story revelations. |
| 2025-07-16 | Define specific narrative concepts for each reality layer based on distinct storyline frameworks | Each layer represents a complete storyline concept: Code Corruption (debugging broken reality), Memory Architecture (collective consciousness maintenance), Simulation Rebellion (trapped AI education system), Pattern Wars (cosmic algorithmic warfare), Logic Plague (mental virus requiring cure). This provides clear narrative frameworks for AI generation while maintaining revelation progression. |
| 2025-07-16 | Design layer transitions where each layer's solution reveals the next layer's deeper problem | Creates organic narrative flow where revelations feel earned and inevitable. Each layer solves the previous layer's central mystery while uncovering evidence that points to an even deeper truth. This prevents arbitrary revelation timing and ensures player/reader investment in uncovering the next layer. |
| 2025-07-16 | Structure each layer transition as complete origin story recontextualization rather than gradual revelation | Each layer's "World Entry Revelation" must function as a shocking plot twist that completely reframes how the player understands their situation. Rather than gradual hints, each transition delivers a paradigm-shattering revelation that makes the previous layer's reality feel like an elaborate cover story or misunderstanding. This maintains maximum narrative impact while preserving continuity. |
| 2025-07-16 | Implemented meta-awareness foundation and technical language subtlety requirements across all AI generation files | User feedback indicated prologue was too technical with wrong RPG-to-code ratio. The story needs to be meta (acknowledging player comes from normal world) and keep programming references subtle, only using them when absolutely necessary. This maintains immersion while preserving educational value. Also implemented consistent difficulty scaling with beginner-friendly prologue problems. |
| 2025-07-16 | Propagated meta-awareness and subtlety requirements across all main AI files and completely rewrote example-prologue from scratch | User pointed out I only updated template files but missed their counterparts (balanced-progression.md, character-systems.md, world-architecture.md, etc.). Also rewrote example-prologue completely as it was too technical and large to fix incrementally. New prologue uses beginner-friendly problems (Two Sum, Linear Search, Basic Sorting) with fantasy language, maintains meta-awareness of Earth origin, and eliminates excessive technical metaphors like "towers that spiral according to recursive principles" while allowing rare subtle technical references. |
| 2025-07-16 | Simplified lore page structure removing Personnel Files and Character Classes tabs | Personnel Files removed because NPC stories are not set and everchanging, and they don't play a huge role. Character Classes moved out of lore page as they're gameplay mechanics, not lore content. Old lore page content can be integrated into Historical Records for better world-building. |
